import{r as h}from"./index-DIDRz_s2.js";import{c as $,m as mo}from"./memoTheme-CJcpijc4.js";import{g as ho}from"./getScrollbarSize-CaCM53D3.js";import{o as L}from"./ownerWindow-HkKU3E4x.js";import{o as U}from"./ownerDocument-DW-IO8s5.js";import{u as go}from"./useForkRef-Cmn-Dh7x.js";import{u as V}from"./useEventCallback-B5h_k30D.js";import{c as Z}from"./createChainedFunction-BO_9K8Jh.js";import{e as bo}from"./mergeSlotProps-fp1W1fei.js";import{g as eo,a as no,s as q,c as so}from"./styled-B0X8gopH.js";import{u as j}from"./useSlot-CFc0_OMk.js";import{j as w}from"./jsx-runtime-BoZ7yaty.js";import{u as ro}from"./DefaultPropsProvider-Di_N6kFi.js";import{P as xo}from"./Portal-Cdjvc33M.js";import{F as Ro}from"./FocusTrap-vTo9pgoY.js";import{F as Eo}from"./Fade-D0jgUazQ.js";function yo(t){return no("MuiBackdrop",t)}const _o=eo("MuiBackdrop",["root","invisible"]),Po=t=>{const{classes:o,invisible:s}=t;return so({root:["root",s&&"invisible"]},yo,o)},ko=q("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[o.root,s.invisible&&o.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),To=h.forwardRef(function(o,s){const e=ro({props:o,name:"MuiBackdrop"}),{children:i,className:n,component:r="div",invisible:l=!1,open:d,components:f={},componentsProps:S={},slotProps:P={},slots:R={},TransitionComponent:p,transitionDuration:k,...v}=e,E={...e,component:r,invisible:l},g=Po(E),b={transition:p,root:f.Root,...R},I={...S,...P},u={slots:b,slotProps:I},[T,N]=j("root",{elementType:ko,externalForwardedProps:u,className:$(g.root,n),ownerState:E}),[M,A]=j("transition",{elementType:Eo,externalForwardedProps:u,ownerState:E});return w.jsx(M,{in:d,timeout:k,...v,...A,children:w.jsx(T,{"aria-hidden":!0,...N,classes:g,ref:s,children:i})})});function Co(t){const o=U(t);return o.body===t?L(t).innerWidth>o.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function B(t,o){o?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function _(t){return parseInt(L(t).getComputedStyle(t).paddingRight,10)||0}function vo(t){const s=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),e=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return s||e}function oo(t,o,s,e,i){const n=[o,s,...e];[].forEach.call(t.children,r=>{const l=!n.includes(r),d=!vo(r);l&&d&&B(r,i)})}function Y(t,o){let s=-1;return t.some((e,i)=>o(e)?(s=i,!0):!1),s}function Mo(t,o){const s=[],e=t.container;if(!o.disableScrollLock){if(Co(e)){const r=ho(L(e));s.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight=`${_(e)+r}px`;const l=U(e).querySelectorAll(".mui-fixed");[].forEach.call(l,d=>{s.push({value:d.style.paddingRight,property:"padding-right",el:d}),d.style.paddingRight=`${_(d)+r}px`})}let n;if(e.parentNode instanceof DocumentFragment)n=U(e).body;else{const r=e.parentElement,l=L(e);n=(r==null?void 0:r.nodeName)==="HTML"&&l.getComputedStyle(r).overflowY==="scroll"?r:e}s.push({value:n.style.overflow,property:"overflow",el:n},{value:n.style.overflowX,property:"overflow-x",el:n},{value:n.style.overflowY,property:"overflow-y",el:n}),n.style.overflow="hidden"}return()=>{s.forEach(({value:n,el:r,property:l})=>{n?r.style.setProperty(l,n):r.style.removeProperty(l)})}}function wo(t){const o=[];return[].forEach.call(t.children,s=>{s.getAttribute("aria-hidden")==="true"&&o.push(s)}),o}class So{constructor(){this.modals=[],this.containers=[]}add(o,s){let e=this.modals.indexOf(o);if(e!==-1)return e;e=this.modals.length,this.modals.push(o),o.modalRef&&B(o.modalRef,!1);const i=wo(s);oo(s,o.mount,o.modalRef,i,!0);const n=Y(this.containers,r=>r.container===s);return n!==-1?(this.containers[n].modals.push(o),e):(this.containers.push({modals:[o],container:s,restore:null,hiddenSiblings:i}),e)}mount(o,s){const e=Y(this.containers,n=>n.modals.includes(o)),i=this.containers[e];i.restore||(i.restore=Mo(i,s))}remove(o,s=!0){const e=this.modals.indexOf(o);if(e===-1)return e;const i=Y(this.containers,r=>r.modals.includes(o)),n=this.containers[i];if(n.modals.splice(n.modals.indexOf(o),1),this.modals.splice(e,1),n.modals.length===0)n.restore&&n.restore(),o.modalRef&&B(o.modalRef,s),oo(n.container,o.mount,o.modalRef,n.hiddenSiblings,!1),this.containers.splice(i,1);else{const r=n.modals[n.modals.length-1];r.modalRef&&B(r.modalRef,!1)}return e}isTopModal(o){return this.modals.length>0&&this.modals[this.modals.length-1]===o}}function Io(t){return typeof t=="function"?t():t}function No(t){return t?t.props.hasOwnProperty("in"):!1}const to=()=>{},D=new So;function Fo(t){const{container:o,disableEscapeKeyDown:s=!1,disableScrollLock:e=!1,closeAfterTransition:i=!1,onTransitionEnter:n,onTransitionExited:r,children:l,onClose:d,open:f,rootRef:S}=t,P=h.useRef({}),R=h.useRef(null),p=h.useRef(null),k=go(p,S),[v,E]=h.useState(!f),g=No(l);let b=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(b=!1);const I=()=>U(R.current),u=()=>(P.current.modalRef=p.current,P.current.mount=R.current,P.current),T=()=>{D.mount(u(),{disableScrollLock:e}),p.current&&(p.current.scrollTop=0)},N=V(()=>{const c=Io(o)||I().body;D.add(u(),c),p.current&&T()}),M=()=>D.isTopModal(u()),A=V(c=>{R.current=c,c&&(f&&M()?T():p.current&&B(p.current,b))}),y=h.useCallback(()=>{D.remove(u(),b)},[b]);h.useEffect(()=>()=>{y()},[y]),h.useEffect(()=>{f?N():(!g||!i)&&y()},[f,y,g,i,N]);const K=c=>a=>{var m;(m=c.onKeyDown)==null||m.call(c,a),!(a.key!=="Escape"||a.which===229||!M())&&(s||(a.stopPropagation(),d&&d(a,"escapeKeyDown")))},W=c=>a=>{var m;(m=c.onClick)==null||m.call(c,a),a.target===a.currentTarget&&d&&d(a,"backdropClick")};return{getRootProps:(c={})=>{const a=bo(t);delete a.onTransitionEnter,delete a.onTransitionExited;const m={...a,...c};return{role:"presentation",...m,onKeyDown:K(m),ref:k}},getBackdropProps:(c={})=>{const a=c;return{"aria-hidden":!0,...a,onClick:W(a),open:f}},getTransitionProps:()=>{const c=()=>{E(!1),n&&n()},a=()=>{E(!0),r&&r(),i&&y()};return{onEnter:Z(c,(l==null?void 0:l.props.onEnter)??to),onExited:Z(a,(l==null?void 0:l.props.onExited)??to)}},rootRef:k,portalRef:A,isTopModal:M,exited:v,hasTransition:g}}function Bo(t){return no("MuiModal",t)}eo("MuiModal",["root","hidden","backdrop"]);const Ao=t=>{const{open:o,exited:s,classes:e}=t;return so({root:["root",!o&&s&&"hidden"],backdrop:["backdrop"]},Bo,e)},Oo=q("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[o.root,!s.open&&s.exited&&o.hidden]}})(mo(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:o})=>!o.open&&o.exited,style:{visibility:"hidden"}}]}))),Do=q(To,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),ot=h.forwardRef(function(o,s){const e=ro({name:"MuiModal",props:o}),{BackdropComponent:i=Do,BackdropProps:n,classes:r,className:l,closeAfterTransition:d=!1,children:f,container:S,component:P,components:R={},componentsProps:p={},disableAutoFocus:k=!1,disableEnforceFocus:v=!1,disableEscapeKeyDown:E=!1,disablePortal:g=!1,disableRestoreFocus:b=!1,disableScrollLock:I=!1,hideBackdrop:u=!1,keepMounted:T=!1,onClose:N,onTransitionEnter:M,onTransitionExited:A,open:y,slotProps:K={},slots:W={},theme:io,...G}=e,z={...e,closeAfterTransition:d,disableAutoFocus:k,disableEnforceFocus:v,disableEscapeKeyDown:E,disablePortal:g,disableRestoreFocus:b,disableScrollLock:I,hideBackdrop:u,keepMounted:T},{getRootProps:c,getBackdropProps:a,getTransitionProps:m,portalRef:ao,isTopModal:lo,exited:X,hasTransition:J}=Fo({...z,rootRef:s}),F={...z,exited:X},x=Ao(F),O={};if(f.props.tabIndex===void 0&&(O.tabIndex="-1"),J){const{onEnter:C,onExited:H}=m();O.onEnter=C,O.onExited=H}const Q={slots:{root:R.Root,backdrop:R.Backdrop,...W},slotProps:{...p,...K}},[co,po]=j("root",{ref:s,elementType:Oo,externalForwardedProps:{...Q,...G,component:P},getSlotProps:c,ownerState:F,className:$(l,x==null?void 0:x.root,!F.open&&F.exited&&(x==null?void 0:x.hidden))}),[fo,uo]=j("backdrop",{ref:n==null?void 0:n.ref,elementType:i,externalForwardedProps:Q,shouldForwardComponentProp:!0,additionalProps:n,getSlotProps:C=>a({...C,onClick:H=>{C!=null&&C.onClick&&C.onClick(H)}}),className:$(n==null?void 0:n.className,x==null?void 0:x.backdrop),ownerState:F});return!T&&!y&&(!J||X)?null:w.jsx(xo,{ref:ao,container:S,disablePortal:g,children:w.jsxs(co,{...po,children:[!u&&i?w.jsx(fo,{...uo}):null,w.jsx(Ro,{disableEnforceFocus:v,disableAutoFocus:k,disableRestoreFocus:b,isEnabled:lo,open:y,children:h.cloneElement(f,O)})]})})});export{To as B,ot as M,_o as b};
