import{j as n}from"./jsx-runtime-BoZ7yaty.js";import{r as ee}from"./index-DIDRz_s2.js";import{c as V}from"./clsx.m-C7bORDfW.js";import{g as re,a as ae,s as i,c as oe}from"./styled-QckRPC_l.js";import{u as ne}from"./DefaultPropsProvider-BgzOhfjl.js";import{u as I}from"./useDragOver-B_I74yYZ.js";import{u as S}from"./useDocumentEventListener-DcHHZa3z.js";import{B as te,t as se,b as ie}from"./ButtonBase-BtCzZW19.js";import{T}from"./Typography-dCWir4IF.js";import{I as le}from"./IconUpload-Dr1EwXca.js";import"./_commonjsHelpers-gnU0ypJ3.js";import"./useLatest-sVqXUmVb.js";import"./useForkRef-DJnV46t9.js";import"./memoTheme-DzcScnLI.js";import"./index-CckzPfJL.js";import"./extendSxProp-DvIFaZWy.js";import"./useTheme-Dg4q0o-B.js";import"./emotion-react.browser.esm-Cye-CgRM.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./DefaultPropsProvider-DX0NN56D.js";import"./SvgIcon-DcWEUr91.js";import"./SvgIcon.classes-CE9bwLeY.js";function pe(e){return ae("ESDropzone",e)}const de=re("ESDropzone",["root","dropzone","dropzoneDragOverDocument","dropzoneDragOver","dropzoneError","input","icon","heading","headingText","subheading","helperText","helperTextError"]),ce=(e,r)=>e.charAt(0)==="."&&r.toLowerCase().endsWith(e),ge=(e,r)=>e.endsWith("/*")&&r.startsWith(e.replace(/\/.*$/,"")),ue=(e,r)=>e.some(a=>a===r.type||ge(a,r.type)||ce(a,r.name)),me=(e,r)=>{const a=r.split(",").map(s=>s.trim());return a.includes("*")||ue(a,e)},he=e=>{const{classes:r,error:a,isDragOver:s,isDragOverDocument:p}=e;return oe({root:["root"],dropzone:["dropzone",a&&"dropzoneError",s&&"dropzoneDragOver",p&&"dropzoneDragOverDocument"],input:["input"],icon:["icon"],heading:["heading"],headingText:["headingText"],subheading:["subheading"],helperText:["helperText",a&&"helperTextError"]},pe,r)},fe=i("div",{name:"ESDropzone",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({display:"grid",gap:8,gridAutoFlow:"row"})),xe=i(te,{name:"ESDropzone",slot:"Dropzone",overridesResolver:(e,r)=>{const{ownerState:{error:a,isDragOver:s,isDragOverDocument:p}}=e;return[r.dropzone,a&&r.dropzoneError,s&&r.dropzoneDragOver,p&&r.dropzoneDragOverDocument]}})(({theme:e})=>({width:"100%",display:"flex",padding:"32px 24px",border:`1px dashed ${e.vars.palette.monoA.A200}`,borderRadius:4,"--background":e.vars.palette.monoA.A25,"--hovered":e.vars.palette.monoA.A50,"--pressed":e.vars.palette.monoA.A150,[`& .${ie.wrapper}`]:{flexDirection:"column"},variants:[{props:{isDragOver:!0},style:{[`& .${se.root}`]:{backgroundColor:"var(--hovered)"}}},{props:{error:!0},style:{"--background":e.vars.palette.error.A50,border:`1px dashed ${e.vars.palette.error.A800}`,[` .${de.heading}`]:{color:e.vars.palette.error[300]}}}]})),ve=i("div",{name:"ESDropzone",slot:"Heading",overridesResolver:(e,r)=>r.heading})(({theme:e})=>({alignItems:"center",color:e.vars.palette.primary[300],display:"grid",gap:"4px",gridAutoFlow:"column",justifyContent:"center",minHeight:"32px"})),k=i(T,{name:"ESDropzone",slot:"HeadingText",overridesResolver:(e,r)=>r.headingText})({paddingTop:"4px",paddingBottom:"4px"}),F=i(T,{name:"ESDropzone",slot:"Subheading",overridesResolver:(e,r)=>r.subheading})(({theme:e})=>({color:e.vars.palette.monoA.A500,marginTop:"4px"})),De=i("div",{name:"ESDropzone",slot:"Subheading",overridesResolver:(e,r)=>r.icon})(()=>({alignItems:"center",display:"flex",justifyContent:"center"})),be=i("input",{name:"ESDropzone",slot:"Input",overridesResolver:(e,r)=>r.input})(()=>({display:"none"})),ye=i(T,{name:"ESDropzone",slot:"HelperText",overridesResolver:(e,r)=>{const{ownerState:{error:a}}=e;return[r.helperText,a&&r.helperTextError]}})(({theme:e})=>({color:e.vars.palette.monoA.A700,variants:[{props:{error:!0},style:{color:e.vars.palette.error.A800}}]})),x=e=>{const{className:r,sx:a,heading:s,subheading:p,dragHeading:c,dragSubheading:E,helperText:C,error:B=!1,icon:H,multiple:w,accept:j="*",maxSize:A,ref:L,onChange:v,onReject:D,...U}=ne({props:e,name:"ESDropzone"}),{isDragOver:$,onDragEnter:P,onDragLeave:W,onDrop:J}=I(),{isDragOver:g,...b}=I(),u=ee.useRef(null),K=o=>A?A>=o.size:!0,Q=()=>{u.current&&(u.current.value="",u.current.click())},R=(o,O)=>{let l=[];const m=[];for(let d=0;d<O.length;d++){const h=O[d],q=me(h,j),N=K(h);if(q&&N)l.push(h);else{const z=[];q||z.push("file-invalid-type"),N||z.push("file-too-large"),m.push({file:h,errors:z})}}!w&&l.length>1&&(l.slice(1).forEach(d=>{m.push({file:d,errors:["too-many-files"]})}),l=[l[0]]),m.length&&(D==null||D(o,m)),l.length&&(v==null||v(o,l))},X=o=>{o.preventDefault()},Y=o=>{o.preventDefault(),J(),o.dataTransfer&&R(o,o.dataTransfer.files)},Z=o=>{o.target.files&&R(o,o.target.files)};S("dragenter",b.onDragEnter),S("dragleave",b.onDragLeave),S("drop",b.onDrop);const y={...U,error:B,isDragOver:$,isDragOverDocument:g},t=he(y);return n.jsxs(fe,{ref:L,className:V(t.root,r),sx:a,children:[n.jsxs(xe,{className:V(t.dropzone),"data-testid":"dropzone",ownerState:y,onClick:Q,onDragEnter:P,onDragLeave:W,onDragOver:X,onDrop:Y,children:[n.jsxs(ve,{className:t.heading,children:[!!H&&!(g&&c)&&n.jsx(De,{className:t.icon,"data-testid":"icon",children:H}),g&&c?n.jsx(k,{className:t.headingText,variant:"body200",children:c}):!!s&&n.jsx(k,{className:t.headingText,variant:"body100",children:s})]}),g&&E?n.jsx(F,{className:t.subheading,variant:"caption",children:E}):!!p&&n.jsx(F,{className:t.subheading,variant:"caption",children:p})]}),!!C&&n.jsx(ye,{className:t.helperText,ownerState:y,variant:"caption",children:C}),n.jsx(be,{ref:u,accept:j,className:t.input,"data-testid":"input",multiple:w,type:"file",onChange:Z})]})};try{x.displayName="Dropzone",x.__docgenInfo={description:"This component allows to select files on click or by drag and drop.",displayName:"Dropzone",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},className:{defaultValue:null,description:"Class applied to the root element.",name:"className",required:!1,type:{name:"string"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"Partial<DropzoneClasses>"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},heading:{defaultValue:null,description:"Heading text.",name:"heading",required:!1,type:{name:"string"}},subheading:{defaultValue:null,description:"Subheading text.",name:"subheading",required:!1,type:{name:"string"}},dragHeading:{defaultValue:null,description:"Heading text when file is dragged over the page.",name:"dragHeading",required:!1,type:{name:"string"}},dragSubheading:{defaultValue:null,description:"Subheading text when file is dragged over the page.",name:"dragSubheading",required:!1,type:{name:"string"}},helperText:{defaultValue:null,description:"Helper text.",name:"helperText",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"Indicate if component is in error state.",name:"error",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"Icon to display with heading.",name:"icon",required:!1,type:{name:"ReactNode"}},multiple:{defaultValue:null,description:"Allow multiple files.",name:"multiple",required:!1,type:{name:"boolean"}},accept:{defaultValue:{value:"'*'"},description:"Accepted file types.",name:"accept",required:!1,type:{name:"string"}},maxSize:{defaultValue:null,description:"Maximum file size (in bytes).",name:"maxSize",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"Callback fired when files were accepted.",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<unknown>, files: File[]) => void)"}},onReject:{defaultValue:null,description:"Callback fired when files were rejected.",name:"onReject",required:!1,type:{name:"((event: ChangeEvent<unknown>, rejections: FileRejection[]) => void)"}}}}}catch{}const ze=(e,r)=>e.heading||(r.globals.locale==="en"?"Choose files":"Выберите файлы"),Se=(e,r)=>e.subheading||(r.globals.locale==="en"?"or drag files in this area (max size: 50 MB)":"или перетащите файлы в эту область (не более 50 мб)"),Te=(e,r)=>e.dragHeading||(r.globals.locale==="en"?"Drag files here":"Перетащите файлы сюда"),Ee=(e,r)=>e.dragSubheading||(r.globals.locale==="en"?"release files in this area (max size: 50 MB)":"отпустите файл в этой области (не более 50 мб)"),Ce=(e,r)=>e.helperText||(r.globals.locale==="en"?"Some important text":"Какой-то важный текст"),Ke={tags:["autodocs"],component:x,parameters:{references:["Dropzone"]},argTypes:{heading:{table:{category:"General"}},subheading:{table:{category:"General"}},dragHeading:{table:{category:"General"}},dragSubheading:{table:{category:"General"}},helperText:{table:{category:"General"}},error:{table:{category:"General"}},accept:{table:{category:"General"}},maxSize:{table:{category:"General"}},multiple:{table:{category:"General"}},icon:{table:{disable:!0}}},args:{accept:"*"}},f={render:(e,r)=>n.jsx(x,{...e,dragHeading:Te(e,r),dragSubheading:Ee(e,r),heading:ze(e,r),helperText:Ce(e,r),icon:n.jsx(le,{}),subheading:Se(e,r)})};var _,G,M;f.parameters={...f.parameters,docs:{...(_=f.parameters)==null?void 0:_.docs,source:{originalSource:`{
  render: (args, context) => {
    return <Dropzone {...args} dragHeading={getDragHeading(args, context)} dragSubheading={getDragSubheading(args, context)} heading={getHeading(args, context)} helperText={getHelperText(args, context)} icon={<IconUpload />} subheading={getSubheading(args, context)} />;
  }
}`,...(M=(G=f.parameters)==null?void 0:G.docs)==null?void 0:M.source}}};const Qe=["Demo"];export{f as Demo,Qe as __namedExportsOrder,Ke as default};
