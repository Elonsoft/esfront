import{j as n}from"./jsx-runtime-BoZ7yaty.js";import{r as y}from"./index-DIDRz_s2.js";import{c as ee}from"./clsx.m-C7bORDfW.js";import{a as te,g as oe,s as d,c as ne}from"./generateUtilityClasses-D4qQEpRV.js";import{b as re}from"./useThemeProps-DJft-tfL.js";import{I as ie,a as se}from"./IconSortDescending-hacn9P6h.js";import{u as ae}from"./useMediaQuery-DpPGjVl8.js";import{M as le}from"./MenuList-Ccyljjh3.js";import{D as ue,d as ce}from"./Divider-DrLGcsND.js";import{K as I,k as j}from"./Kbd-D4V7piLH.js";import{S as de,s as pe}from"./Switch-CGrLrTpw.js";import{a as me}from"./Popover-DMugHk6X.js";import{T as w,t as ge}from"./Typography-BriYb5H6.js";import{L as fe}from"./Link-C96XTKl3.js";import{M as he,l as be,b as R}from"./MenuItem-OzUXNg8S.js";import{b as S}from"./ButtonBase-B9dD5NpA.js";import{B as xe,b as N}from"./Button-Kloa1MkC.js";import{L as Se}from"./ListItemText-BTinP9Nb.js";function ve(t){return te("ESSortingMenu",t)}const B=oe("ESSortingMenu",["root","menuItem","menuHeader","menuFooter","resetButton","directionButton","directionButtonBadge","plusSign","caption"]),Me=()=>navigator.userAgent.indexOf("Macintosh")>0,ye=t=>{const{classes:r}=t;return ne({root:["root"],menuItem:["menuItem"],menuHeader:["menuHeader"],menuFooter:["menuFooter"],resetButton:["resetButton"],directionButton:["directionButton"],directionButtonBadge:["directionButtonBadge"],plusSign:["plusSign"],caption:["caption"]},ve,r)},Be=d(me,{name:"ESSortingMenu",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t})=>({"& .MuiPopover-paper":{...t.scrollbars.overlayMonoA,marginTop:"4px",paddingBottom:"6px",backgroundImage:"none",backgroundColor:t.vars.palette.surface[400],boxShadow:t.vars.palette.shadow.down[600],userSelect:"none",overflowX:"hidden","& .MuiList-root":{width:"320px",padding:"0"}}})),we=d("div",{name:"ESSortingMenu",slot:"MenuHeader",overridesResolver:(t,r)=>r.menuHeader})(()=>({display:"flex",justifyContent:"space-between",padding:"14px 16px 6px 16px"})),Ce=d("div",{name:"ESSortingMenu",slot:"MenuFooter",overridesResolver:(t,r)=>r.menuFooter})(({theme:t})=>({borderTop:`1px solid ${t.vars.palette.monoA.A100}`,marginTop:"8px",padding:"6px 3px 0 12px",display:"flex",alignItems:"center",[`& .${j.root}:first-of-type`]:{marginRight:"3px"},[`& .${j.root}:last-of-type`]:{marginLeft:"3px",marginRight:"8px"},[`& .${pe.root}`]:{marginLeft:"auto"}})),Te=d(fe,{name:"ESSortingMenu",slot:"ResetButton",overridesResolver:(t,r)=>r.resetButton})(({theme:t})=>({color:t.vars.palette.monoA.A500})),V=d(he,{name:"ESSortingMenu",slot:"MenuItem",overridesResolver:(t,r)=>r.menuItem})(()=>({[`&:not(.${R.disabled})`]:{display:"flex",justifyContent:"space-between"},[`&.${R.disabled}`]:{color:"inherit",padding:"0 0 6px 0",display:"block",minHeight:0,height:"auto",cursor:"default",[`& > .${S.wrapper}`]:{width:"inherit",display:"block"},[`& .${ce.root}`]:{margin:"8px 0"}},[`& .${S.wrapper} .${be.root}`]:{display:"inline-flex",flexShrink:"1",[`& .${ge.root}`]:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}})),Ae=d(xe,{name:"ESSortingMenu",slot:"DirectionButton",overridesResolver:(t,r)=>r.directionButton})(({theme:t})=>({"--icon":t.vars.palette.monoA.A600,[`&.${N.root}`]:{flexShrink:0,textTransform:"unset",position:"relative",zIndex:10,borderRadius:0,padding:0,[`&.${N.size400}`]:{"--pressed":"transparent","--hovered":"transparent"},[`& .${S.wrapper}`]:{gap:"6px"},[`&:not(.${S.disabled}):focus-visible`]:{outline:"none"},"&:focus-visible":{"& .MuiTypography-root":{color:t.vars.palette.monoA.A900},[`& .${B.directionButtonBadge}`]:{backgroundColor:t.vars.palette.secondary.A550}},"&:hover":{[`& .${B.directionButtonBadge}`]:{backgroundColor:t.vars.palette.secondary.A550},"& .MuiTypography-root:first-of-type":{color:t.vars.palette.monoA.A900}},"&:active":{[`& .${B.directionButtonBadge}`]:{backgroundColor:t.vars.palette.secondary.A400},"& .MuiTypography-root:first-of-type":{color:t.vars.palette.monoA.A600}}}})),Ee=d("div",{name:"ESSortingMenu",slot:"DirectionButtonBadge",overridesResolver:(t,r)=>r.directionButtonBadge})(({theme:t})=>({display:"flex",borderRadius:"4px",padding:"3px 2px",backgroundColor:t.vars.palette.secondary.A400,boxShadow:`inset 0 0 0 1px ${t.vars.palette.monoA.A25}`})),Ie=d(w,{name:"ESSortingMenu",slot:"PlusSign",overridesResolver:(t,r)=>r.plusSign})(({theme:t})=>({color:t.vars.palette.monoA.A900})),f=d(w,{name:"ESSortingMenu",slot:"Caption",overridesResolver:(t,r)=>r.caption})(({theme:t})=>({color:t.vars.palette.monoA.A600})),je=t=>{if(t.nextElementSibling&&t.nextElementSibling.getAttribute("aria-disabled")==="true")return t.nextElementSibling.nextElementSibling;if(t.nextElementSibling)return t.nextElementSibling},P=y.memo(function(r){const{PopoverProps:p,options:h=[],labelAsc:k,labelDesc:D,labelResetButton:$,labelSortOrder:q,labelSortTooltip:C,labelMultisortTitle:_,labelMultisortLMB:O,labelMultisortMobileOn:L,labelMultisortMobileOff:F,iconItemAsc:H=n.jsx(ie,{container:!0,containerHeight:"12px",containerWidth:"8px"}),iconItemDesc:K=n.jsx(se,{container:!0,containerHeight:"12px",containerWidth:"8px"}),...c}=re({props:r,name:"ESSortingMenu"}),s=c.multiple?c.value:c.value?[c.value]:[],z={classes:c.classes,isWithValue:!!s[0]},l=ye(z),U=ae("(hover: none) and (pointer: coarse)"),[u,b]=y.useState(c.multiple&&s.length>1),x=y.useRef(null),a={},T={};s.forEach((e,o)=>{T[e.value]={direction:e.direction,i:o}}),h.forEach(e=>{a[e.value]={...e,...T[e.value]}});const W=(e,o)=>{o!=null&&o.code&&setTimeout(()=>{var g;let i=(g=x==null?void 0:x.current)==null?void 0:g.firstChild;do if(i.firstChild.innerText===e){i.focus();break}while(i=i.nextElementSibling)})},m=e=>{c.multiple?c.onChange(e):c.onChange(e[0]?{...e[0]}:null)},Q=()=>{m(!u||s.length===1?[...s]:[]),b(!u)},X=()=>{b(!1),m([])},G=e=>{const o=s[a[e].i]?s.filter(({value:i})=>i!==e||!u):[...s,{value:e,direction:"asc"}];b(!!o.length),m(o)},J=e=>o=>{c.multiple&&(u||(o==null?void 0:o.metaKey)||(o==null?void 0:o.ctrlKey))?G(e):m(s[a[e].i]?[]:[{value:e,direction:"asc"}]),W(a[e].label,o)},Y=e=>o=>{o.stopPropagation();const i=[...s];i[a[e].i].direction=i[a[e].i].direction==="asc"?"desc":"asc",m(i)},Z=e=>{var o,i,g;if(e.target.type==="button")switch(e.code){case"ArrowLeft":((o=e.target.parentNode)==null?void 0:o.parentNode).focus();break;case"ArrowUp":const A=((i=e.target.parentElement)==null?void 0:i.parentElement).previousElementSibling;A&&(e.stopPropagation(),A.focus());break;case"ArrowDown":const E=je((g=e.target.parentElement)==null?void 0:g.parentElement);E&&(e.stopPropagation(),E.focus());break}else e.code==="ArrowRight"&&e.target.childNodes[0].childNodes[1]&&e.target.childNodes[0].childNodes[1].focus()},v=e=>{e.stopPropagation()},M=(e,o,i=!1)=>n.jsxs(V,{className:l.menuItem,selected:!!e.direction,size:"100",tabIndex:i&&o===0?0:-1,onClick:J(e.value),onKeyDown:Z,children:[n.jsx(Se,{children:a&&a[e.value].label}),!!e.direction&&n.jsxs(Ae,{disableTouchRipple:!0,className:l.directionButton,color:"tertiary",size:"400",tabIndex:-1,onClick:Y(e.value),onMouseDown:v,onPointerDown:v,onTouchStart:v,children:[n.jsx(f,{className:l.caption,variant:"caption",children:e.direction==="asc"?a[e.value].labelAsc||k:a[e.value].labelDesc||D}),n.jsxs(Ee,{className:l.directionButtonBadge,children:[e.direction==="asc"?H:K,u&&n.jsx(w,{variant:"mini100Bold",children:o+1})]})]})]},e.value);return n.jsxs(Be,{...p,TransitionProps:{...p.TransitionProps,onExited:(...e)=>{var o,i;u&&s.length===1&&b(!1),(i=(o=p.TransitionProps)==null?void 0:o.onExited)==null||i.call(o,...e)}},className:ee(l.root,p.className),children:[n.jsxs(we,{className:l.menuHeader,children:[n.jsx(f,{className:l.caption,variant:"caption",children:u&&s.length?q:C}),!!s.length&&n.jsx(Te,{autoFocus:!0,className:l.resetButton,component:"button",underline:"hover",variant:"caption",onClick:X,children:$})]}),n.jsxs(le,{ref:x,autoFocusItem:!s.length,children:[u&&s.map((e,o)=>M(a[e.value],o,!0)),u&&!!s.length&&s.length!==h.length&&n.jsxs(V,{disabled:!0,children:[n.jsx(ue,{}),n.jsx(f,{className:l.caption,component:"div",marginTop:"14px",paddingLeft:"16px",variant:"caption",children:C})]},"middleSortingDivider"),u&&h.filter(e=>!a[e.value].direction).map((e,o)=>M(a[e.value],o)),!u&&h.map((e,o)=>M(a[e.value],o,!0))]}),c.multiple&&n.jsxs(Ce,{className:l.menuFooter,children:[U?n.jsx(f,{className:l.caption,variant:"caption",children:u?L:F}):n.jsxs(n.Fragment,{children:[n.jsx(I,{variant:"outlined",children:Me()?"âŒ˜":"Ctrl"}),n.jsx(Ie,{className:l.plusSign,component:"span",variant:"caption",children:"+"}),n.jsx(I,{variant:"outlined",children:O}),n.jsx(f,{className:l.caption,variant:"caption",children:_})]}),n.jsx(de,{checked:u,size:"small",type:"button",onChange:Q})]})]})});try{P.displayName="SortingMenu",P.__docgenInfo={description:"The SortingMenu allow users to sort list of items by one or multiple properties.",displayName:"SortingMenu",props:{classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"Partial<SortingMenuClasses>"}},options:{defaultValue:null,description:"The sorting options.",name:"options",required:!1,type:{name:"SortingMenuOption[]"}},PopoverProps:{defaultValue:null,description:"",name:"PopoverProps",required:!0,type:{name:"PopoverProps"}},labelAsc:{defaultValue:null,description:"Text for the ascending label.",name:"labelAsc",required:!1,type:{name:"string"}},labelDesc:{defaultValue:null,description:"Text for the descending label.",name:"labelDesc",required:!1,type:{name:"string"}},labelResetButton:{defaultValue:null,description:"Text for the reset button.",name:"labelResetButton",required:!1,type:{name:"string"}},labelSortOrder:{defaultValue:null,description:"Text for the sorting menu button label when multisort is enabled.",name:"labelSortOrder",required:!1,type:{name:"string"}},labelSortTooltip:{defaultValue:null,description:"Text for the menu title.",name:"labelSortTooltip",required:!1,type:{name:"string"}},labelMultisortTitle:{defaultValue:null,description:"Text for the switch label.",name:"labelMultisortTitle",required:!1,type:{name:"string"}},labelMultisortLMB:{defaultValue:null,description:"Text for the left mouse button.",name:"labelMultisortLMB",required:!1,type:{name:"string"}},labelMultisortMobileOn:{defaultValue:null,description:"Text for the switch label.",name:"labelMultisortMobileOn",required:!1,type:{name:"string"}},labelMultisortMobileOff:{defaultValue:null,description:"Text for the switch label.",name:"labelMultisortMobileOff",required:!1,type:{name:"string"}},iconItemAsc:{defaultValue:null,description:"Icon for the ascending item direction.",name:"iconItemAsc",required:!1,type:{name:"ReactNode"}},iconItemDesc:{defaultValue:null,description:"Icon for the descending item direction.",name:"iconItemDesc",required:!1,type:{name:"ReactNode"}},multiple:{defaultValue:null,description:"If `true`, multiple options can be selected.",name:"multiple",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:`The selected options with directions.
The selected option with direction.`,name:"value",required:!0,type:{name:"SortingMenuValue | SortingMenuValue[] | null"}},onChange:{defaultValue:null,description:"Callback fired when user changes sorting.",name:"onChange",required:!0,type:{name:"((value: SortingMenuValue[]) => void) | ((value: SortingMenuValue | null) => void)"}}}}}catch{}export{P as S};
